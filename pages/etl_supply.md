# 'Supply Depot, by ginc'

<table>
 <tr>
  <td><a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/supply.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/supply.png" width="256"/></a></td>
  <td><a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/supply_cc.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/supply_cc.png" width="256"/></a></td>
  <td rowspan="8"><b>Index:</b><br>
<a href="https://github.com/realkemon/home/blob/master/README.md">Home</a><br>
<ul>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#story">Story</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#objectives">Objectives</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#media">Media</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#options">Options</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#additions">Additions</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#changelog">Changelog</a></li>
 <ul>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#version-4-pending">version 4 (pending)</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#version-3">version 3</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#version-2">version 2</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#version-1">version 1</a></li>
 </ul>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#development">Development</a></li>
 <ul>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#source">Source</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_supply.md#compile-parameters">Compile Parameters</a></li>
 </ul></td>
 </tr>
 <tr>
  <td>BSP name</td>
  <td>etl_supply_v3.bsp</td>
 </tr>
 <tr>
  <td>Status</td>
  <td>version 3</td>
 </tr>
 <tr> 
  <td>Latest Release</td>
  <td>January 2021</td>
 </tr>
 <tr>
  <td>Players</td>
  <td>32 vs 32</td>
 </tr>
 <tr>
  <td>Original map by</td>
  <td>ginc</td>
 </tr>
 <tr>
  <td>Visual overhaul by</td>
  <td>kemon</td>
 </tr>
 <tr>
  <td>Download</td>
  <td><a href="https://www.moddb.com/mods/etlegacy/addons/supply-depot-by-ginc-v3" title="Download 'Supply Depot, by ginc' (v3) - Mod DB" target="_blank"><img src="https://button.moddb.com/download/medium/207300.png" alt="'Supply Depot, by ginc' (v3)" /></a></td>
 </tr>
</table>


## Story

**Campaign: Submarine Depot**

1. **‘Supply Depot, by ginc’**
2. ‘Adlernest, by Dersaidin’ *(work-in-progress)*
3. ’Bergen, by Detoeni’

The first target of the Allied paratroopers tasked with disrupting supply lines of the naval base is a smaller supply depot. According to reports by the local resistance, this depot is currently in the process of preparing a supply shipment. The Allies, therefore, launch an attack to steal this shipment and use it to further strengthen the efforts of the local resistance. The Axis cannot, under any circumstances, allow this shipment to fall into Allied hands and will attempt to defend the depot at all cost.


## Objectives

### Axis
* Stop the Allies from breaching the Forward Bunker Gate with dynamite.
* Stop the Allies from breaching the Depot Gate with dynamite.
* Ensure that the Allied truck does not reach the Depot crane.
* Stop the Allies from constructing the crane controls on the upper level of the Depot warehouse, and don't let them operate the crane.
* Do not allow the Allied truck to escape with the gold.
* Stop the Allies from breaching the West Depot Wall with dynamite.
* Stop the Allies from breaching the East Depot Wall with dynamite.
* Build a command post at the abandoned cabin, and do not allow the allies to do the same."

### Allies
* Breach the Forward Bunker Gate with dynamite.
* Breach the Depot Gate with dynamite.
* Escort the Allied truck to the Depot crane.
* Construct the crane controls on the upper level of the Depot warehouse, and operate the crane to load the gold onto the Truck.
* Escort the Allied truck out of the Depot and escape with the gold.
* Breach the West Depot Wall with dynamite.
* Breach the East Depot Wall with dynamite.
* Secondary: Build a command post at the abandoned cabin, and do not allow the axis to do the same.


## Media
<a href="https://i.imgur.com/xLtSmcq.jpg"><img src="https://i.imgur.com/xLtSmcq.jpg"></a>
<a href="https://i.imgur.com/nKroooj.jpg"><img src="https://i.imgur.com/nKroooj.jpg"></a>
<a href="https://i.imgur.com/Nv5rIiL.jpg"><img src="https://i.imgur.com/Nv5rIiL.jpg"></a>
<a href="https://i.imgur.com/GCbgNn9.jpg"><img src="https://i.imgur.com/GCbgNn9.jpg"></a>
<a href="https://i.imgur.com/gN4JH17.jpg"><img src="https://i.imgur.com/gN4JH17.jpg"></a>
<a href="https://i.imgur.com/3BNMQL3.jpg"><img src="https://i.imgur.com/3BNMQL3.jpg"></a>
<a href="https://i.imgur.com/H8vqkuu.jpg"><img src="https://i.imgur.com/H8vqkuu.jpg"></a>
<a href="https://i.imgur.com/HTH9xUV.jpg"><img src="https://i.imgur.com/HTH9xUV.jpg"></a>
<a href="https://i.imgur.com/P79d0f1.jpg"><img src="https://i.imgur.com/P79d0f1.jpg"></a>
<a href="https://i.imgur.com/HmO2eGu.jpg"><img src="https://i.imgur.com/HmO2eGu.jpg"></a>


## Options
ET maps are played in very different settings depending on the active gamemode and server configuration. To avoid maintaining different variations of the same map version, the overhauls come with optional features that server admins can specify in the map script. If additional optional features are desired, please reach out on [Discord](https://discord.gg/QECRUG9VAY).
```
//====OPTIONAL SETTINGS==============================================================
wait 1000
// Toggle the line of the respective setting you want to change by (un-)commenting.
//
setdamagable truck 0					// Make truck invulnerable
// setstate crane_controls_TJ invisible	// Clip brush in crane controls window	(hidden by default)
// setstate radio_1_speaker invisible	// Radio in forward bunker spawn (enabled by default)
// setstate radio_2_speaker invisible	// Radio at depot gates (enabled by default)
// globalaccum 2 set 1					// Axis CP spawn (disabled by default)
//===================================================================================
```
'Supply Depot, by ginc' comes with...
* ... the option to toggle the truck (in-)vulnerable. By default, the truck is invulnerable. To let Axis damage it, comment the line `setdamagable truck 0`.
* ... an optional clip brush in the crane controls window to prevent TJ. This clip is enabled by default. To disable it, uncomment the line `setstate crane_controls_TJ invisible`.
* ... the option to disable radio speakers. They are enabled by default. To disable, uncomment the lines `setstate radio_1_speaker invisible` and `setstate radio_2_speaker invisible`.
* an optional CP spawn for the Axis team. By default, the spawn is disabled. To enable it, uncomment the line `globalaccum 2 set 1`.


## Additions
In an attempt to improve the map further, two features have been added. One with a gameplay impact and the other one simply being a quality of life improvement for spectators and shout-casters.
<a href="https://i.imgur.com/JCcZb18.jpg"><img src="https://i.imgur.com/JCcZb18.jpg"></a>
The gameplay feature is the additional of an antenna, which is linked to the Command Post. It provides a near-global visual indicator for the status of the Command Post. (Destroyed, Under Construction, Constructed).
<a href="https://i.imgur.com/GTJ8hE2.jpg"><img src="https://i.imgur.com/GTJ8hE2.jpg"></a>
The quality of life improvement are skylights in the two main bunkers, which are solid for players and entities (bullets, explosions, grenades, etc.), but non-solid for spectators and shout casters. They allow spectators to maintain a constant overview of action around the facilities, while also keeping an eye on the respective main objective to never miss crucial events.


## Changelog

### version 4 (pending)

* [TODO] Re-add *'Truck is in position'* line as announcement. *(Thank you SAP for reporting)*
* [TODO] Add second satchel exploit mapscript fix from [here](https://antman.info/wolf/etpro/download.php?mapscripts/supply.script) to fix [destruction exploit](https://github.com/realkemon/home/issues/25). *(Thanks jobhh for reporting)*

### version 3

* Substantial performance improvements by reducing drawn surfaces with adjusted light settings. *(Thank you hatcher for comprehensive support)*
* Provided option to toggle truck invulnerable or not through mapscript (invulnerable by default). *(Thank you ETc.Jay for reporting and absolutely huge thanks to Ensiform for finding the perfect way to do this)*
* Fixed gold crate support blocks visible through walls.
* Fixed `setstate` errors in console after dynamiting 1st main gate. *(Thank you WuTangH for reporting)*
* Fixed CP sound playing in second round after `/map_restart`. *(Thank you WuTangH for reporting)*
* Fixed `surfaceparm grasssteps` to add missing sounds when walking on grass. *(Thank you WuTangH and Aciz for reporting)*
* Adjusted clip brush at forward bunker teamdoor/gate to prevent getting stuck on the edge. 
* Crate controls not showing satchel icon for Axis. *(Thank you WuTangH for reporting)*
* Fixed visible seams in terrain textures.
* Increased amount of spawn slots from 20vs20 to 32vs32. *(Thank you Dmxj for reporting)*
* Fixed skyportal incorectly having sky shader instead of mountain.
* Fixed flying rock next to east depot wall.
* Reduced weird shadows from the ceiling lampshades. *(Thank you Aciz for reporting.)*

### version 2

* Changed floodlight colour to uniform white. *(Thank you Aciz for reporting.)*
* Fixed vanilla ET compatibility. *(Thank you Kate for reporting.)*
* Fixed various trickjumps. *(Thank you Aciz for reporting.)*
* Cleaned collision for easier player movement. *(Thank you Aciz for reporting.)*
* Fixed mirrored textures in vanilla ET. *(Thank you Aciz for reporting.)*
* Changed crane control construction indicators for clearer visibility.
* Improved lighting and general visibility.
* Fixed issue where planting landmines was possible everywhere. *(Thank you Aciz for reporting.)*

### version 1

* Added targetname and scriptname to nearly all in-game entities to enable server admins to build custom scripts if desired.
* Extended map skywards to allow for free shoutcaster/spectator movement.
* Implemented windows into the forward bunker roof to allow shoutcasters and spectators to maintain an overview at all times.
* Comprehensive rework of structural mesh to improve on VIS.
* Removed player collision from noticeboards, picture frames, lying doors etc.
* Enlarged some door and window frames for more consistent use of dimensions across the map.
* Colour-coded stairwells in forward bunker.
* Fixed clip position of destroyed allied cp model.
* Removed collision from crane rope.
* Dispersed spawn points to declutter mass spawn events.
* Adjusted terrain around some rocks to prevent leaks at the border.
* Added team specific CP sounds.
* Re-added previously removed radio speakers.
* Increased player count to 20v20.
* Added external antenna as visual indicator for CP status.
* Changed depot alarm to only sound for a specific time (15 seconds) instead of linked to the truck position.


## Development
 
### Source
Since we are talking about an open-sourced game, in my opinion as much as possible should be available to the public. In that spirit, the map source, along with sources of my other maps, can be found in this repo. It is kept updated with all latest changes, which means the map-source does not necessarily reflect the status of the last release. If you encounter any issues, I would prefer it if you contacted me or simply opened an issue on the tracker, instead of recompiling a version yourself.

[Download](https://github.com/realkemon/home/tree/master/maps)
|:---|
[Activity Tracker](https://github.com/realkemon/home/milestone/6)

### Compile parameters
```
<build name="Supply Depot, by ginc">
<command>[q3map2] -bsp -meta -samplesize 4 -v -mv 1024 -mi 6144 &quot;[MapFile]&quot;</command>
<command>[q3map2] -vis -saveprt -v &quot;[MapFile]&quot;</command>
<command>[q3map2] -light -fast -samples 4 -samplesize 4 -bounce 3 -bouncegrid -v -thresh 0.5 -shade -dirty -dirtdepth 256 -lightmapsize 1024 -patchshadows -external &quot;[MapFile]&quot;</command>
</build>
```

[:arrow_backward: Return to Home](https://github.com/realkemon/home/blob/master/README.md) [:arrow_double_up: Back to the Top](https://github.com/realkemon/home/blob/master/pages/etl_supply.md)
