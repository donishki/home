# 'Bergen, by Detoeni'

<table>
 <tr>
  <td><a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen.png" width="256"/></a></td>
  <td><a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen_cc.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen_cc.png" width="256"/></a></td>
  <td rowspan="8"><b>Index:</b><br>
<a href="https://github.com/realkemon/home/blob/master/README.md#-cedric-aka-kemon">Home</a><br>
<ul>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#story">Story</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#objectives">Objectives</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#media">Media</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#options">Options</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#Additions">Additions</a></li>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#changelog">Changelog</a></li>
 <ul>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-6-pending">version 6 (pending)</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-5">version 5</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-4">version 4</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-3">version 3</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-2">version 2</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#version-1">version 1</a></li>
 </ul>
 <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#development">Development</a></li>
 <ul>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#source">Source</a></li>
  <li><a href="https://github.com/realkemon/home/blob/master/pages/etl_bergen.md#compile-parameters">Compile Parameters</a></li>
 </ul></td>
 </tr>
 <tr>
  <td>BSP name</td>
  <td>etl_bergen_v5.bsp</td>
 </tr>
 <tr>
  <td>Status</td>
  <td>version 5</td>
 </tr>
 <tr> 
  <td>Latest Release</td>
  <td>January 2021</td>
 </tr>
 <tr>
  <td>Players</td>
  <td>32 vs 32</td>
 </tr>
 <tr>
  <td>Original map by</td>
  <td>Detoeni</td>
 </tr>
 <tr>
  <td>Visual overhaul by</td>
  <td>kemon</td>
 </tr>
 <tr>
  <td>Download</td>
  <td><a href="https://www.moddb.com/mods/etlegacy/addons/bergen-by-detoeni-v5" title="Download 'Bergen, by Detoeni' (v5) - Mod DB" target="_blank"><img src="https://button.moddb.com/download/medium/207303.png" alt="'Bergen, by Detoeni' (v5)" /></a></td>
 </tr>
</table>


## Story
**Campaign: Submarine Depot**

1. ‘Supply Depot, by ginc’
2. ‘Adlernest, by Dersaidin’ *(work-in-progress)*
3. **’Bergen, by Detoeni’**

Having disrupted recent supply shipments, the Allies launch their final attack on the now vulnerable naval base and their goal is clear: Use an armoured vehicle to breach the gates of the base and sabotage the transmitter to disrupt communication to the submarines and force them to retreat. To prevent Allied convoys reaching shores, the Axis have to hold the naval base at all cost and keep the transmitter operational.


## Objectives

### Axis
* Stop the Allies from destroying the Transmitter.
* Prevent the Allies from repairing the Generator.
* Set up a Command Post inside the submarine pen.
* Prevent the Allies from gaining a foothold in the Forward Bunker.
* Prevent the Allies from destroying the Side Entrance.

### Allies
* Destroy the Transmitter.
* Repair the Generator.
* Set up a Command Post in the submarine pen to secure the forward bunker.
* Capture the Forward Bunker.
* Destroy the Side Entrance.

## Media
[Dark Matter Productions](https://darkmatterpro.wixsite.com/site) have kindly created a release trailer for 'Bergen, by Detoeni'. A massive thank you to them and their continuous support. Please watch the trailer [here](https://www.youtube.com/watch?v=qeAa6wWPFnc) Do note that the trailer was made for an outdated version of the map and does not necessarily reflect the current state of the map!

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen1.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen1.png"></a>


<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen2.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen2.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen3.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen3.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen4.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen4.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen5.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen5.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen6.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen6.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen7.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen7.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen8.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen8.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen9.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen9.png"></a>

<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen10.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen10.png"></a>


## Options
ET maps are played in very different settings depending on the active gamemode and server configuration. To avoid maintaining different variations of the same map version, the overhauls come with optional features that server admins can specify in the map script. If additional optional features are desired, please reach out on [Discord](https://discord.gg/QECRUG9VAY).
```
//====OPTIONAL SETTINGS==============================================================
wait 1000
// Toggle the line of the respective setting you want to change by (un-)commenting.
//
// setdamagable tank 0			// Make tank invulnerable
globalaccum 5 set 1			  	// Secure flag while Allies hold both CP and flag
//===================================================================================
```
'Bergen, by Detoeni' comes with...
* ... the option to toggle the tank (in-)vulnerable. By default, the tank is vulnerable. To prevent Axis from damaging it, uncomment the line `setdamagable tank 0`.
* ... the option to secure the forward bunker flag while the Allies hold both the CP and the flag. Flag secure is enabled by default. To disable it, comment the line `globalaccum 5 set 1`.


## Additions
In an attempt to aid and simplify gameplay especially for new players, a few additions have been implemented in the overhauls. If additional gameplay-aiding features are desired, please reach out on [Discord](https://discord.com/invite/QECRUG9VAY).

### Coloured Trims
<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen_walltrim.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen_walltrim.png"></a>
To simplify callouts for players that are not familiar with long-standing competitive terms, coloured trims have been added at the walls to allow players to quickly and easily communicate to their teammate where they or enemy players are.

### Roof Skylights
<a href="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen_roof.png"><img src="https://raw.githubusercontent.com/realkemon/home/master/levelshots/bergen/bergen_roof.png"></a>
To support the movement and overview of spectators and shoutcasters, not only is the terrain opened up to allow for free movement on all overhauls, but also skylights have been added to allow spectators and shoutcasters to maintain a constant overview of crucial map areas. These skylights are solid for players and entities *(e.g. airstrikes, grenades)*, but are non-solid for spectators and shoutcasters to further strengthen free movement and allow them to drop into the action at any time.


## Changelog

### version 6 (pending)

* [TODO] Forward flag spawn has a spawnslot stuck within the flag. *(Thanks to ETc.Jay for reporting)*

### version 5

* Renamed targetname `south_door_closed0` to `south_door_closed` to fix game crash. *(Thanks to Kate for reporting)*
* Fixed sounds and remapshaders active at map start in second round after `/map_restart`. *(Thanks to WuTangH for reporting issue on 'Supply Depot, by ginc')*
* Provided option to toggle tank invulnerable through mapscript (vulnerable by default). *(Thanks to Ensiform for explanation)*
* Increased amount of spawn slots from 16vs16 to 32vs32.
* Fixed surfaceparm grasssteps to add missing sounds when walking on grass. *(Thanks to WuTangH for reporting issue on 'Supply Depot, by ginc')*
* Removed deprecated alarm sounds.

### version 4

* Simplified geometry for cleaner player collision
* Replaced colour coded wires with colour coded bunker trim and command map for more subtle implementation
* Replaced side entrance terrain with artificial pier to prevent walljumping
* Reverted V1 Rocket back to airplane
* Improved lighting and terrain
* Added skylights to generator room and Axis spawn to simplify spectator/shoutcaster movement
* Improved VIS blocking and performance

### version 3

* Fixed caulk in terrain at forward bunker and northern courtyard. Thank you ryven for reporting.
* Fixed side entrance being unplantable when footbridge was constructed. Thank you Harlekin for reporting.
* Fixed missing footbridge related VO sound for Axis
* Fixed bug where sound wouldn’t play when main entrance got destroyed
* Fixed 3 terrain spots where it was possible for the player to either get stuck or be obstructed in their way. Thank you Harlekin for reporting.
* Added cabinet marker in the command map. Thank you IR4T4 and Ensiform for reporting.
* Added lights in forward bunker. Thank you Ensiform for reporting.
* Added audible feedback to generator door levers when generator is destroyed.
* Added base alarm sounding whenever the transmitter area gets breached. This replaces the simple text announcement. Thank you ryven and WuTangH for debugging.
* Added ambient sounds (capturable flag, crickets in nature and birds in trees). Thank you IR4T4 for reporting.
* Adjusted trigger_hurt of v1 rocket to cover entire explosion area. Thank you Harlekin for reporting.
* Adjusted terrain at side entrance to prevent the easiest TJs. Thank you Aciz and ryven for extensive feedback.
* Adjusted MG murderhole at side entrance to reduce shooting against the insides. Also adjusted its varc. Thank you ryven for reporting.
* Adjusted tree at side path to no longer be partially inside the cliff. Thank you Harlekin for reporting.
* Replaced generator command map icon with standard icons to clarify mission objective. Thank you Harlekin for reporting.
* Replaced tree between forward bunker and allied mg blocking line of sight. Thank you Mateos for reporting.
* Removed little tree at side path blocking movement and visibility. Thank you Harlekin for reporting.
* Reduced brushcount of terrain significantly and added hills between forward bunker and rear base to increase VIS blocking and performance. Thank you Aciz and ryven for reporting.


### version 2

* Various clipping issues have been fixed, where players could get stuck. Thank you Aciz and WuTangH for reporting.
* Various TJ possibilities have been removed, to prevent not intended, easy access to map objectives. Thank you Aciz for reporting.
  * As a result, the river at the Side Entrance had to be widened as the only real solution.
* Lighting has been improved at various locations. Thank you Aciz for reporting.
* A missing shader issue at the transmitter controls has been fixed. Thank you [UJE]Niek for reporting.
* Side Entrance entity setup has been revised. Thank you ryven for debugging.
* Bot waypoints are now available at the omnibot repo. Thank you Mateos for creating bot support.
* Terrain shader issue inside the bunker corridors, which lead to dirt splashes when shooting the ground, has been resolved. Thank you [UJE]Niek for reporting.
* Terrain brushwork has been adjusted to remove a caulk leak at the main entrance. Thank you ryven for reporting.
* Ambient sounds have been added for 2 fireplaces and 1 generator. Thank you IR4T4 for reporting.
* Moved a hovering lamp at the transmitter controls bunker. Thank you Aciz for reporting.


### version 1

* VO announcements have been adapted by Radar.
  * As long as both Main and Side Entrance are active VO is: “defend/destroy entrances”
  * As soon as one has been breached VO is: “defend/destroy the side OR main entrance”
* VO announcements for the Footbridge have been added.
* Alarm now sounds in the entire base when either the Side- or Main Entrance have been breached instead of separated alarms.
* The snapping of the tank at certain view-angles has been fixed
* If the Allies hold both the Forward Bunker flag and the CP, the flag is “temporarily secured” until the CP is lost again.
* The Forward Door (before, Transmitter Door 3) is now linked to the generator.
* Spectator limbo cam has been fixed (was inside of terrain).
* Construction materials have been made in the style of original maps.
* Teleport and secret room have been removed.
* Axis rear spawn has been restructured to allow for faster exit.
* Plane shooting down the tank has been replaced with a V1 Rocket to create narrative link to V1_Rocket map by FireFly, which is on the list to be overhauled as well.
* Entity count has been reduced from 568 to 498.
* Structural mesh and VIS blocking have been improved by adjusting vertical differences of the floors.
* Visual changes have been made.


## Development

### Source
Since we are talking about an open-sourced game, in my opinion as much as possible should be available to the public. In that spirit, the map source, along with sources of my other maps, can be found in the repo. It is kept updated with all latest changes, which means the map-source does not necessarily reflect the status of the last release. If you encounter any issues, I would prefer it if you contacted me or simply opened an issue on the tracker, instead of recompiling a version yourself.

[Download](https://github.com/realkemon/home/tree/master/maps)
|:---|
[Activity Tracker](https://github.com/realkemon/home/milestone/2)

### Compile parameters:
```
<build name="Bergen, by Detoeni">
<command>[q3map2] -bsp -meta -samplesize 4 -v -mv 1024 -mi 6144 &quot;[MapFile]&quot;</command>
<command>[q3map2] -vis -saveprt -v &quot;[MapFile]&quot;</command>
<command>[q3map2] -light -fast -samples 4 -samplesize 4 -bounce 3 -bouncegrid -v -thresh 0.5 -shade -dirty -dirtdepth 256 -lightmapsize 1024 -patchshadows -external &quot;[MapFile]&quot;</command>
</build>
```

[:arrow_backward: Return to Home](https://github.com/realkemon/home/blob/master/README.md#-cedric-aka-kemon) [:arrow_double_up: Back to the Top](https://github.com/realkemon/home/blob/master/etl_bergen.md#)
